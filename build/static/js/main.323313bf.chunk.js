(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{104:function(e,t,c){},105:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(19),r=c(8),i=c(24),a=c(46),l=c(29),o=c.n(l),j=c(47),f=c(6),b=c(2),u=c(48).create({baseURL:"https://front-test.beta.aviasales.ru/"}),h={getSearchId:function(){return u.get("search").then((function(e){return e.data}))},getTickets:function(e){return u.get("tickets?searchId=".concat(e)).then((function(e){return e.data}))}},d="filter/SET_FILTER",O="filter/SET_TICKETS",m="filter/SET_FILTERED_TICKETS",g="filter/SET_USER_ID",p="filter/SET_THE_CHEAPEST",x="filter/SET_THE_FASTEST",T="filter/SET_OPTIMAL",k="filter/SET_FETCHING",v={filter:{all:!0,noTransfer:!0,oneTransfer:!0,twoTransfer:!0,threeTransfer:!0},tickets:[],isFetching:!1},N=function(e){return{type:k,isFetching:e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return!t.filter.all&&t.filter.noTransfer&&t.filter.oneTransfer&&t.filter.twoTransfer&&t.filter.threeTransfer?Object(b.a)(Object(b.a)({},e),{},{filter:Object(b.a)(Object(b.a)(Object(b.a)({},e.filter),t.filter),{},{all:!0})}):(!t.filter.all||t.filter.noTransfer)&&t.filter.oneTransfer&&t.filter.twoTransfer&&t.filter.threeTransfer?Object(b.a)(Object(b.a)({},e),{},{filter:Object(b.a)(Object(b.a)({},e.filter),t.filter)}):Object(b.a)(Object(b.a)({},e),{},{filter:Object(b.a)(Object(b.a)(Object(b.a)({},e.filter),t.filter),{},{all:!1})});case m:return Object(b.a)(Object(b.a)({},e),{},{filteredTickets:Object(f.a)(t.filteredTickets)});case O:return Object(b.a)(Object(b.a)({},e),{},{tickets:[].concat(Object(f.a)(e.tickets),Object(f.a)(t.tickets))});case g:return Object(b.a)(Object(b.a)({},e),{},{userId:t.userId});case p:return Object(b.a)(Object(b.a)({},e),{},{tickets:Object(f.a)(e.tickets.sort((function(e,t){return e.price-t.price})))});case x:return Object(b.a)(Object(b.a)({},e),{},{tickets:Object(f.a)(e.tickets.sort((function(e,t){var c=function(e){return e.segments[0].duration+e.segments[1].duration};return c(e)-c(t)})))});case T:return Object(b.a)(Object(b.a)({},e),{},{tickets:Object(f.a)(e.tickets.sort((function(e,t){return e.price+e.segments[0].duration+e.segments[1].duration-(t.price+t.segments[0].duration+t.segments[1].duration)})))});case k:return Object(b.a)(Object(b.a)({},e),{},{isFetching:t.isFetching});default:return e}},E=Object(i.b)({filter:w}),y=Object(i.c)(E,Object(i.a)(a.a)),S=(c(88),c.p+"static/media/Logo.f2ab8f4c.svg"),F=c(21),I=c(56),C=c(109),_=(c(89),c(1)),D=function(e){var t=e.filter,c=e.setFilter,s=Object(n.useState)(t),r=Object(I.a)(s,2),i=r[0],a=r[1],l=function(e){var t=e.target,c=t.value,n=t.checked;a((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(F.a)({},c,n))}))};return Object(n.useEffect)((function(){c(i)}),[i,c,a]),Object(_.jsxs)("div",{className:"filters",children:[Object(_.jsx)("h3",{children:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(_.jsxs)("ul",{role:"article",children:[Object(_.jsx)("li",{className:"filter-item",onKeyDown:null,children:Object(_.jsx)(C.a,{value:"all",checked:t.all,onChange:function(e){a((function(t){return Object(b.a)(Object(b.a)({},t),{},{all:e.target.checked,noTransfer:e.target.checked,oneTransfer:e.target.checked,twoTransfer:e.target.checked,threeTransfer:e.target.checked})}))},children:"\u0412\u0441\u0435"})}),Object(_.jsx)("li",{className:"filter-item",children:Object(_.jsx)(C.a,{value:"noTransfer",checked:t.noTransfer,onChange:l,children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})}),Object(_.jsx)("li",{className:"filter-item",children:Object(_.jsx)(C.a,{value:"oneTransfer",checked:t.oneTransfer,onChange:l,children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})}),Object(_.jsx)("li",{className:"filter-item",children:Object(_.jsx)(C.a,{value:"twoTransfer",checked:t.twoTransfer,onChange:l,children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})}),Object(_.jsx)("li",{className:"filter-item",children:Object(_.jsx)(C.a,{value:"threeTransfer",checked:t.threeTransfer,onChange:l,children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})})]})]})},R=Object(r.b)((function(e){return{filter:e.filter.filter,userId:e.filter.userId}}),{setFilter:function(e){return{type:d,filter:e}}})(D),L=(c(91),function(e){var t=e.setTheCheapest,c=e.setTheFastest,n=e.setOptimal;return Object(_.jsxs)("div",{className:"tabs row mb-3",children:[Object(_.jsx)("button",{type:"button",className:"col-xs-1 col-sm-4 col-md-4 btn btn-outline-primary",onClick:t,children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"}),Object(_.jsx)("button",{type:"button",className:"col-xs-1 col-sm-4 col-md-4 btn btn-outline-primary",onClick:c,children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}),Object(_.jsx)("button",{type:"button",className:"col-xs-1 col-sm-4 col-md-4 btn btn-outline-primary",onClick:n,children:"\u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439"})]})}),A=Object(r.b)((function(){return{}}),{setTheCheapest:function(){return{type:p}},setTheFastest:function(){return{type:x}},setOptimal:function(){return{type:T}}})(L),H=c(18),K=c.n(H),U=c(110),J=function(e,t){var c=[];return t.all&&(c=e.map((function(e){return e}))),t.noTransfer&&(c=[].concat(Object(f.a)(c),Object(f.a)(e.filter((function(e){return 0===e.segments[0].stops.length&&0===e.segments[1].stops.length}))))),t.oneTransfer&&(c=[].concat(Object(f.a)(c),Object(f.a)(e.filter((function(e){return 1===e.segments[0].stops.length&&1===e.segments[1].stops.length}))))),t.twoTransfer&&(c=[].concat(Object(f.a)(c),Object(f.a)(e.filter((function(e){return 2===e.segments[0].stops.length&&2===e.segments[1].stops.length}))))),t.threeTransfer&&(c=[].concat(Object(f.a)(c),Object(f.a)(e.filter((function(e){return 3===e.segments[0].stops.length&&3===e.segments[1].stops.length}))))),c},M=c(107),P=(c(92),function(e){var t=e.price,c=e.segments,n=e.carrier,s=function(e){return"".concat(Math.trunc(e/60),"\u0447 ").concat(e%60,"\u043c")};return Object(_.jsxs)("li",{className:"ticket",children:[Object(_.jsxs)("div",{className:"ticket-header d-flex align-items-center justify-content-between",children:[Object(_.jsxs)("span",{className:"price",children:[t.toLocaleString("ru-RU")," \u0420"]}),Object(_.jsx)("img",{src:"http://pics.avs.io/150/50/".concat(n,".png"),alt:n})]}),Object(_.jsxs)("div",{className:"ticket-info row",children:[Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsxs)("span",{className:"ticket-info-heading",children:[c[0].origin,"-",c[0].destination]}),Object(_.jsxs)("div",{className:"ticket-info-time",children:[Object(M.a)(new Date(c[0].date),"hh:mm"),"-",Object(M.a)(new Date(c[0].date).getTime()+6e4*c[0].duration,"hh:mm")]})]}),Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsx)("span",{className:"ticket-info-heading",children:"\u0432 \u043f\u0443\u0442\u0438"}),Object(_.jsx)("div",{className:"ticket-info-time",children:s(c[0].duration)})]}),Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsxs)("span",{className:"ticket-info-heading",children:[c[0].stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"]}),Object(_.jsx)("div",{className:"ticket-info-time",children:Object(_.jsx)("div",{className:"ticket-info-time",children:c[0].stops.map((function(e){return Object(_.jsx)("span",{style:{marginRight:5},children:e},K()())}))})})]}),Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsxs)("span",{className:"ticket-info-heading",children:[c[1].origin,"-",c[1].destination]}),Object(_.jsxs)("div",{className:"ticket-info-time",children:[Object(M.a)(new Date(c[1].date),"hh:mm"),"-",Object(M.a)(new Date(c[1].date).getTime()+6e4*c[1].duration,"hh:mm")]})]}),Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsx)("span",{className:"ticket-info-heading",children:"\u0432 \u043f\u0443\u0442\u0438"}),Object(_.jsx)("div",{className:"ticket-info-time",children:s(c[1].duration)})]}),Object(_.jsxs)("div",{className:"col-4 pb-2",children:[Object(_.jsxs)("span",{className:"ticket-info-heading",children:[c[1].stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"]}),Object(_.jsx)("div",{className:"ticket-info-time",children:c[1].stops.map((function(e){return Object(_.jsx)("span",{style:{marginRight:5},children:e},K()())}))})]})]})]})}),q=(c(93),function(e){var t=e.tickets,c=e.filter,n=e.isFetching,s=J(t,c),r=s.map((function(e){return Object(_.jsx)(P,Object(b.a)({},e),K()())})).slice(0,5);return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("ul",{className:"ticket-list row",children:[0===s.length?Object(_.jsx)("div",{className:"ticket-list-description mb-3",children:"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):null,n?r:Object(_.jsx)(U.a,{}),Object(_.jsx)("button",{type:"button",className:"show-more",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})]})})}),G=Object(r.b)((function(e){return{tickets:e.filter.tickets,filter:e.filter.filter,isFetching:e.filter.isFetching}}),{})(q),z=(c(104),function(e){var t=e.getAllTickets,c=e.tickets;return Object(n.useEffect)((function(){0===c.length&&t()}),[c,t]),Object(_.jsx)("div",{className:"bg",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"logo d-flex justify-content-center",children:Object(_.jsx)("img",{src:S,alt:""})}),Object(_.jsx)("div",{className:"mb-3 col-xs-3 col-sm-12 col-md-4 col-lg-4",children:Object(_.jsx)(R,{})}),Object(_.jsxs)("div",{className:"col-xs-5 col-sm-12 col-md-8 col-lg-8",children:[Object(_.jsx)(A,{}),Object(_.jsx)(G,{})]})]})})})}),B=Object(r.b)((function(e){return{tickets:e.filter.tickets}}),{getAllTickets:function(){return function(e){e(N(!1));var t=function(){var c=Object(j.a)(o.a.mark((function c(n){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",h.getTickets(n).then((function(c){var s;e((s=c.tickets,{type:O,tickets:s})),e(N(!1)),c.stop||t(n),e(N(!0))})).catch((function(e){500===e.response.status&&t(n)})));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();h.getSearchId().then((function(e){return t(e.searchId)})).catch((function(){}))}}})(z);Object(s.render)(Object(_.jsx)(r.a,{store:y,children:Object(_.jsx)(B,{})}),document.querySelector("#root"))},89:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){}},[[105,1,2]]]);
//# sourceMappingURL=main.323313bf.chunk.js.map